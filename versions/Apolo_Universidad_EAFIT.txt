La infraestructura de cómputo Apolo de la Universidad EAFIT
-----------------------------------------------------------

Autor: Oscar Rincón  
Correo: orincon@eafit.edu.co
Fecha: 10 de noviembre de 2025  

Estos son algunos apuntes hechos para recordar como usar la infraestructura Apolo de EAFIT.

Apolo de la Universidad EAFIT es una infraestructura de cómputo de alto rendimiento (HPC, High Performance Computing) 
diseñada para ejecutar simulaciones, análisis numéricos, aprendizaje automático, y otros procesos que requieren una gran capacidad de procesamiento.  

El acceso se realiza de forma remota con una conexión mediante un protocolo seguro (Secure Shell, SSH),
el cual permite conectarse a otro equipo y ejecutar comandos como si se estuviera trabajando directamente en ese servidor.

La ejecución de programas en Apolo se gestiona con la utilidad simple de Linux para la gestión de recursos (Simple Linux Utility for Resource Management, SLURM), 
un administrador de colas que distribuye los recursos del clúster (como núcleos, memoria y tiempo de CPU)
entre los usuarios. SLURM permite enviar, monitorear y controlar los trabajos que se ejecutan en las distintas particiones del supercomputador,
garantizando un uso ordenado y eficiente de los recursos compartidos.

Un clúster (del inglés cluster, que significa “conjunto” o “agrupamiento”) combina múltiples nodos de cómputo.
Cada uno con sus propios procesadores, memoria y almacenamiento, para ejecutar tareas dividiéndolas en partes.

A continuación, se presentan las instrucciones básicas para conectarse, enviar trabajos, y verificar su estado en Apolo.

1. ACCESO INICIAL
-----------------
1. Conéctate con tu usuario y contraseña asignados a la VPN "GlobalProtect".
2. Ingresa al portal: https://leto.omega.eafit.edu.co/
3. Si no lo has hecho, descarga e instala la VPN "GlobalProtect" para conectarte a la red interna.

Una VPN (del inglés, Virtual Private Network) es una red privada virtual.
Permite crear una conexión segura entre tu dispositivo y una red privada a través de internet.

Opcional: WinSCP y PuTTY

2. CONEXIÓN POR SSH
-------------------
Abre una terminal (Linux, macOS, WSL en Windows o la terminal desde vscode) y escribe:

    ssh usuario@eafit.edu.co

Por ejemplo:
    ssh orincon@eafit.edu.co

Luego ingresa tu contraseña cuando el sistema la solicite.

Si las credenciales no funcionan, solicita soporte en:
    apolo@eafit.edu.co

3. COMANDOS ÚTILES EN APOLO
----------------------------
module avail     -> Ver módulos disponibles (ej. versiones de Python, MPI, etc.)
sinfo            -> Información de las particiones (colas de cómputo)
squeue           -> Trabajos en ejecución o en espera
ssqueue          -> Información detallada de los trabajos activos
create_slurm     -> Crea una plantilla de trabajo (archivo .sh) para SLURM
sbash            -> Envía el archivo .sh a la cola de SLURM
scancel <job_id> -> Cancela un trabajo en ejecución

4. MONITOREO DE TRABAJOS
-------------------------
Los mensajes y salidas de consola se almacenan en:
    logs/*.out

Allí puedes revisar la salida o errores de ejecución de tus scripts.

5. CONEXIÓN DESDE VISUAL STUDIO CODE
------------------------------------
1. Abre VS Code.
2. Haz clic en el icono "Remote SSH" (↔️) en la barra inferior o lateral.
3. Selecciona "Connect to Host..." y escribe: usuario@eafit.edu.co
4. Ingresa tu contraseña.
5. Una vez conectado, podrás editar, subir y ejecutar archivos directamente en Apolo.

6. RECOMENDACIONES FINALES
---------------------------
- Verifica la partición donde ejecutas tus trabajos (short, medium, long, gpu, etc.).
- No ejecutes procesos pesados directamente en la terminal. Usa SLURM (sbash).
- Guarda tus resultados y limpia tus carpetas regularmente para no exceder tu espacio asignado.

7. EJEMPLO: CORRER UN PROGRAMA SIMPLE DE PYTHON
------------------------------------------------
A continuación se muestra cómo correr un programa sencillo que imprime mensajes durante unos minutos.

(1) Crea un archivo llamado "test_apolo.py" con el siguiente contenido:

    import time

    for i in range(10):
        print(f"Iteración {i+1}/10 - trabajando...")
        time.sleep(30)  # Espera 30 segundos entre iteraciones

    print("Ejecución finalizada correctamente")

Este script simplemente imprime el número de iteración y espera 30 segundos entre cada una, 
simulando un trabajo corto que dura algunos minutos. Es útil para comprobar que todo está configurado correctamente.

(2) Crea un archivo de trabajo SLURM "*.sh":

    module load Python

(3) Envía el trabajo a la cola:

    sbash *.sh

(4) Monitorea el progreso con:

    squeue -u usuario

(5) Revisa los resultados cuando termine en:

    logs/test_apolo_<jobid>.out